'use strict';import{syslog}from'./syslog.js';import{getMessage as dict}from'./sysdict.js';((a)=>{if(!a)return;a.remove();const b=document.querySelector(a.dataset.container?a.dataset.container:'body');b||syslog.panic(Error(dict('e11')));const c=a.dataset.closest;c||syslog.panic(Error(dict('e12'))),b.addEventListener('click',function(b){const d=b.target.closest(c);d&&d.appendChild(a)}),a.addEventListener('click',function(d){d.stopPropagation(),d.preventDefault();const e=d.target.dataset.exec,f=d.target.closest(c);e&&f&&b.dispatchEvent(new CustomEvent(e,{detail:{closest:f}})),a.remove()}),window.addEventListener('keydown',function(b){'Escape'===b.key&&a.remove()})})(document.querySelector('#menu'));